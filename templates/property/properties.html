{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block styles %}
    {{ super () }}
    <link rel="stylesheet" href="{{ url_for('.static', filename='css/rentport_style.css') }}">
{% endblock %}
{% block navbar %}
    {% set active_page = ".properties"|default('misc.home') %}
    {% include "base_nav.html" %}
{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="panel panel-default">
        <div class="panel-heading"><h1>Properties</h1></div>
        {% for property in props %}
        <p>
        #{{ property.apt_number }} 
        {{ property.address.number }} 
        {{ property.address.street }}
        {{ property.address.neighborhood}} 
        {{ property.address.city}} 
        {{ property.address.county}} 
        {{ property.address.postcode}} 
        {{ property.address.country}} 
        {{ property.description }} 
        {{ property.current_tenants()|map(attribute='username')|join(', ') }}
        </p>
        {% endfor %}
    </div>
    {% if form %}
    <div class="spanForm">
        <button class="btn btn-default" data-toggle="collapse" data-target="#propForm">Add property form</button>
    </div>
    <div id="propForm" class='collapse well'>
    <form action="{{ url_for('property.add_property') }}" method="POST" id="add_location_form" name="add_location_form" role="form">
      {{ form.hidden_tag() }}
      {{ wtf.form_errors(form, hiddens="only")}}
      {{ wtf.form_field(form.unit, placeholder='Unit # or leave blank') }}
      {{ wtf.form_field(form.address, placeholder='Address') }}
      {{ wtf.form_field(form.city, placeholder='City') }}
      {{ wtf.form_field(form.state, placeholder='State') }}
      {{ wtf.form_field(form.description, placeholder='Description') }}
      {{ wtf.form_field(form.submit) }}
    </form>
    </div>
    {% endif %}
    {% include "flash.html" %}
</div>
{% endblock %}
